package cls.exploit.fragment;

import android.app.Activity;
import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.CheckBox;

import com.google.android.gms.ads.AdView;

import cls.exploit.R;
import cls.util.Ads;
import cls.util.Db;

public class Setting extends Fragment implements View.OnClickListener {
    private CheckBox webapp;
    private CheckBox local;
    private CheckBox dos;
    private CheckBox papers;
    private CheckBox shellcode;
    private CheckBox remote;
    private static Activity c;
    private AdView adView;

    public static Setting newInstance() {
        return new Setting();
    }

    public Setting() {


    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        c = getActivity();
        View rootView = inflater.inflate(R.layout.fragment_setting, container, false);

        assert rootView != null;
        webapp = (CheckBox) rootView.findViewById(R.id.checkbox_webapps);
        webapp.setChecked(Db.getPreference(c, getString(R.string.string_webapps), true));
        webapp.setOnClickListener(this);

        local = (CheckBox) rootView.findViewById(R.id.checkbox_local);
        local.setChecked(Db.getPreference(c, getString(R.string.string_local), true));
        local.setOnClickListener(this);

        dos = (CheckBox) rootView.findViewById(R.id.checkbox_dos);
        dos.setChecked(Db.getPreference(c, getString(R.string.string_dos), true));
        dos.setOnClickListener(this);

        papers = (CheckBox) rootView.findViewById(R.id.checkbox_papers);
        papers.setChecked(Db.getPreference(c, getString(R.string.string_papers), true));
        papers.setOnClickListener(this);

        shellcode = (CheckBox) rootView.findViewById(R.id.checkbox_shellcode);
        shellcode.setChecked(Db.getPreference(c, getString(R.string.string_shellcode), true));
        shellcode.setOnClickListener(this);

        remote = (CheckBox) rootView.findViewById(R.id.checkbox_remote);
        remote.setChecked(Db.getPreference(c, getString(R.string.string_remote), true));
        remote.setOnClickListener(this);
        adView= Ads.ads(c, rootView);

        return rootView;
    }

    @Override
    public void onClick(View view) {
        switch (view.getId()) {
            case R.id.checkbox_dos:
                Db.setPreference(c, getString(R.string.string_dos), dos.isChecked());
                break;
            case R.id.checkbox_webapps:
                Db.setPreference(c, getString(R.string.string_webapps), webapp.isChecked());
                break;
            case R.id.checkbox_local:
                Db.setPreference(c, getString(R.string.string_local), local.isChecked());
                break;
            case R.id.checkbox_papers:
                Db.setPreference(c, getString(R.string.string_papers), papers.isChecked());
                break;
            case R.id.checkbox_shellcode:
                Db.setPreference(c, getString(R.string.string_shellcode), shellcode.isChecked());
                break;
            case R.id.checkbox_remote:
                Db.setPreference(c, getString(R.string.string_remote), remote.isChecked());
                break;
        }
    }

    @Override
    public void onResume() {
        super.onResume();
        adView.resume();
    }

    @Override
    public void onDestroy() {
        adView.destroy();
        super.onDestroy();
    }

    @Override
    public void onPause() {
        adView.pause();
        super.onPause();
    }
}